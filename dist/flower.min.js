(()=>{var m=class{_element;dom={input:null,nodes:null,nodeOptions:null};contextTarget=null;registeredNodes=new WeakMap;addNode;getNodeById;constructor(e,t){this._element=document.createElement("div"),this._element.classList.add("flower-menu"),this._element.innerHTML=`<div class="flower-menu-header">
      <input spellcheck="false" placeholder="Search node...">

      <div class="flower-menu-nodes"></div>

      <div class="flower-menu-node-opts">
        <div class="flower-menu-item">
          <p class="flower-menu-item-title">Delete</p>
        </div>
      </div>
    </div>`,this.dom.input=this._element.querySelector("input"),this.dom.nodes=this._element.querySelector(".flower-menu-nodes"),this.dom.nodeOptions=this._element.querySelector(".flower-menu-node-opts"),this.addNode=e,this.getNodeById=t,this.dom.nodeOptions.style.display="none",this.dom.input.addEventListener("input",o=>this.onFilter(o.currentTarget.value)),this.dom.nodes.addEventListener("click",this.onNodeSelect.bind(this)),this.dom.nodeOptions.addEventListener("click",this.onOptionSelect.bind(this))}get x(){return parseFloat(this._element.style.getPropertyValue("--x"))}get y(){return parseFloat(this._element.style.getPropertyValue("--y"))}onFilter(e){let t=this.dom.nodes.style.display===""?this.dom.nodes:this.dom.nodeOptions,o=Array.from(t.querySelectorAll("p"));for(let n of o){let s=n.textContent.toLocaleLowerCase().includes(e.toLowerCase());n.parentElement.style.display=s?"":"none"}}onNodeSelect(e){let t=e.target;if(!t.classList.contains("flower-menu-item")){let n=t.offsetParent;if(n===null||!n.classList.contains("flower-menu-item"))return;t=n}let o=this.registeredNodes.get(t);this.addNode(o).moveTo(this.x,this.y),this.close()}onOptionSelect(e){let t=e.target;if(!t.classList.contains("flower-menu-item")){let s=t.offsetParent;if(s===null||!s.classList.contains("flower-menu-item"))return;t=s}let o=t.firstElementChild.textContent,n=this.getNodeById(this.contextTarget.id);o==="Delete"&&n.remove(),this.close()}registerNode(e){let t=document.createElement("div");t.tabIndex=0,t.classList.add("flower-menu-item"),t.innerHTML=`<p class="flower-menu-item-title">${e.title}</p>
    <p class="flower-menu-item-desc">${e.desc}</p>`,this.registeredNodes.set(t,e.node),this.dom.nodes.appendChild(t)}show(e,t,o=null){if(this._element.style.setProperty("--x",`${e}px`),this._element.style.setProperty("--y",`${t}px`),this.dom.nodes.style.display!==(o!==null?"none":"")){let i=o!==null;this.dom.nodes.style.display=i?"none":"",this.dom.nodeOptions.style.display=i?"":"none"}this._element.classList.add("open"),this.dom.input.value="",this.dom.input.focus(),this.contextTarget=o}close(){this._element.classList.remove("open")}};var h=class{_element;_cachedValue=void 0;_pos={x1:0,y1:0,x2:0,y2:0};_isConnected=!1;_isDirty=!0;inputNode=null;outputNode=null;connectedSocketIndex=-1;constructor(e,t,o){this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("marker-end","url(#marker-arrow)"),this._element.setAttribute("stroke-dasharray","6"),this._element.classList.add("node-socket"),e&&t&&(this.begin(e,t,o),this.end(e,t))}get id(){if(this._isConnected)return this._element.id;let e=this.inputNode?.id.replace("node-","")??0,t=this.outputNode?.id.replace("node-","")??0;return`socket-${e}_${t}_${this.connectedSocketIndex}`}get x1(){return this._pos.x1}get y1(){return this._pos.y1}get x2(){return this._pos.x2}get y2(){return this._pos.y2}get value(){if(this.inputNode)return this._isDirty&&(this._cachedValue=this.inputNode.getValue(),this._isDirty=!1),this._cachedValue}begin(e,t,o){this._pos.x1=e,this._pos.y1=t,this._updatePos(),o&&(this.inputNode=o)}end(e,t,o){this._pos.x2=e,this._pos.y2=t,this._updatePos(),o&&(this.outputNode=o)}_updatePos(){let e="L";if(this._isConnected){let t=(this.x2-this.x1)/2,o=this.x2<this.x1?this.x2+t:this.x2-t;e=`C${o} ${this.y1} ${o} ${this.y2}`}this._element.setAttribute("d",`M${this.x1} ${this.y1} ${e} ${this.x2} ${this.y2}`)}connectNodes(e,t,o=0,n=0){let s=e._group.querySelector(`.node-socket-output:nth-child(${n+1}n)`),i=t._group.querySelector(`.node-socket-input:nth-child(${o+1}n)`),r=e.x+s.cx.baseVal.value,l=e.y+s.cy.baseVal.value,d=t.x,a=t.y+i.cy.baseVal.value;this.connectedSocketIndex=o,this._pos.x1=r,this._pos.y1=l,this._pos.x2=d,this._pos.y2=a,this.inputNode=e,this.connected(t)}connected(e){this.outputNode=e;let t=this.id;this._isConnected=!0,this._element.removeAttribute("stroke-dasharray"),this._element.removeAttribute("marker-end"),this._element.classList.add("connected"),this._element.id=t,this.inputNode.addOutputSocket(this),this.outputNode.addInputSocket(this),this._updatePos(),this.transmitValue()}transmitValue(){!this.inputNode||!this.outputNode||(this._isDirty=!0,!this.value)||(this.outputNode._onPreInput(this.inputNode),this.outputNode.notifyValueChanged())}remove(){this._isConnected&&(this.inputNode&&this.inputNode.outputSockets.delete(this.id),this.outputNode&&this.outputNode.inputSockets.delete(this.id)),this.inputNode=null,this.outputNode=null,this._element.remove()}};var p=class{constructor(e){this.rootEl=e;let t=this.rootEl.ownerSVGElement;this.width=t.width.baseVal.value,this.height=t.height.baseVal.value,this.transform=t.createSVGTransform(),this.transformScale=t.createSVGTransform(),this.rootEl.transform.baseVal.appendItem(this.transform),this.rootEl.transform.baseVal.appendItem(this.transformScale)}transform;transformScale;width;height;MIN_ZOOM=.3;MAX_ZOOM=1.3;get zoom(){return this.transformScale.matrix.a}get position(){return{x:this.transform.matrix.e,y:this.transform.matrix.f}}move(e,t){this.transform.setTranslate(e,t)}moveBy(e,t){let{x:o,y:n}=this.position;this.transform.setTranslate(o+e,n+t)}zoomBy(e,t=0,o=0){let n=this.zoom,s=Math.max(Math.min(this.MAX_ZOOM,n-e),this.MIN_ZOOM),{x:i,y:r}=this.position;this.transform.setTranslate(s/n*(i-t)+t,s/n*(r-o)+o),this.transformScale.setScale(s,s)}};var x=`.flower {
  --color-primary: #70c0e8;
  --color-primary-hover: #8acbec;
  --color-primary-active: #66afd3;
  --color-primary-suppl: #3889C5;
  --color-primary-rgb: 112, 192, 232;

  --color-bg: #101014;
  --color-bg-secondary: #18181c;
  --color-bg-tertiary: #303033;
  --color-text: #CECDC3;
  --color-text-secondary: #ccc;
  --color-text-tertiary: #aaa;

  --node-bg-color: var(--color-bg-secondary);
  --node-color: var(--color-text-secondary);
  --node-border-color: var(--color-bg-tertiary);

  --node-padding: 0.8em 1em;
  --node-title-size: 1.1rem;
  --node-radius: 8px;
  --node-socket-connection-bg: var(--color-text-tertiary);

  --ui-radius: calc(var(--node-radius) / 2);
  --ui-bg-color: var(--color-bg-tertiary);
  --ui-text-color: var(--color-text-secondary);
  --ui-padding: 0.8em 0.875em;
  --ui-gap: 0.5em;

  font-family: Roboto, sans-serif;
  background-color: var(--color-bg);
  color: var(--color-text);
  line-height: 1.4;
  cursor: grab;
  user-select: none;
  position: relative;
  overflow: hidden;
}

.flower * {
  box-sizing: border-box;
}

.flower-menu {
  position: absolute;
  left: var(--x, 0);
  top: var(--y, 0);
  background-color: var(--color-bg-tertiary);
  border: solid 1px rgba(200, 200, 200, 0.25);
  border-radius: var(--node-radius);
  cursor: default;
  display: flex;
  flex-direction: column;
}

.flower-menu-header input {
  background-color: rgba(200, 200, 200, 0.1);
  caret-color: var(--color-text);
  color: var(--color-text);
  padding: var(--ui-padding);
  border-radius: 0.5em;
  font-size: 0.9rem;
  outline: none;
  border: none;
}

.flower-menu-header input:focus {
  outline-color: var(--color-primary-hover);
  background-color: rgba(var(--color-primary-rgb), 0.1);
}

.flower-menu p {
  margin: 0;
}

.flower-menu:not(.open) {
  display: none;
}

.flower-menu-item {
  min-width: 200px;
  padding: var(--node-padding);
  position: relative;
}

.flower-menu-item:hover {
  background-color: rgba(100, 100, 100, 0.3);
  cursor: pointer;
}

.flower-menu-item-title {
  font-weight: bold;
  padding-bottom: 0.2em;
}

.flower-menu-item-desc {
  font-size: 0.75rem;
}

.node-wrapper {
  position: relative;
}

.node-wrapper > rect {
  rx: var(--node-radius);
  border-radius: var(--node-radius);
  fill: var(--node-bg-color);
}

.node-wrapper > rect {
  border-radius: var(--node-radius);
}

.node-socket {
  fill: none;
  stroke: var(--node-socket-connection-bg);
}

.node-socket.connected {
  stroke-width: 3;
}

.node-socket.connected:hover {
  stroke: var(--color-primary-hover);
  cursor: crosshair;
}

.node-socket-output,
.node-socket-input {
  fill: var(--node-socket-connection-bg);
}

.node-socket-output:hover {
  cursor: crosshair;
}

foreignObject {
  border: solid 1px var(--node-border-color);
  border-radius: var(--node-radius);
}

node {
  display: block;
  width: max-content;
  color: var(--node-color);
  padding-bottom: var(--ui-gap);
}

node-content {
  display: flex;
  flex-direction: column;
  gap: var(--ui-gap);
  padding: var(--node-padding);
}

node-content:empty {
  padding: 0;
}

node-content + node-content {
  padding-top: 0;
}

node-content p,
node-content label {
  margin: 0;
  font-size: 0.9rem;
  cursor: inherit;
}

node-title {
  display: block;
  font-size: var(--node-title-size);
  padding: var(--node-padding);
  border-bottom: solid 1px var(--node-border-color);
}

node input,
node select {
  background-color: var(--ui-bg-color);
  border-radius: var(--ui-radius);
  padding: var(--ui-padding);
  color: var(--ui-text-color);
  font-family: inherit;
  font-size: 0.9rem;
  outline: solid 1px transparent;
  border: none;
}

node select[multiple] {
  padding: 0;
}

node select > option {
  padding: 0 1em;
}

node input[type="number"] {
  font-variant-numeric: slashed-zero;
}

node input:focus {
  outline-color: var(--color-primary-hover);
  background-color: rgba(var(--color-primary-rgb), 0.1);
}
`;function v(){let c=document.createElement("style");c.innerHTML=x,document.head.appendChild(c)}var y=class{pointerState={isDragging:!1,dragging:{x:0,y:0},pos:{x:0,y:0},movement:{x:0,y:0},target:null};dom={svg:null,workbench:null,sockets:null};offsetX=0;offsetY=0;nextNodeId=0;viewBox;contextMenu;nodes=new Map;constructor(e){v(),e.classList.add("flower");let t=e.clientWidth,o=e.clientHeight,n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.viewBox.baseVal.x=0,n.viewBox.baseVal.y=0,n.viewBox.baseVal.width=t,n.viewBox.baseVal.height=o,n.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,t),n.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,o),n.classList.add("flower-editor"),n.innerHTML=`<defs>
    <!-- A marker to be used as an arrowhead -->
    <marker
      id="marker-arrow"
      viewBox="0 0 24 24"
      refX="20"
      refY="12"
      markerWidth="24"
      markerHeight="24"
      fill="none"
      stroke="currentColor"
      orient="auto">
        <path stroke-linecap="round" stroke-width="1" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5">
    </marker>
  
    <pattern x="25" y="25" width="50" height="50" patternUnits="userSpaceOnUse" id="gridPattern">
      <rect x="10" y="10" width="1" height="1" fill="#aaa">
    </pattern>
  </defs>
  <g id="viewbox">
    <g id="bg" style="pointer-events: none">
      <rect x="-250%" y="-250%" width="500%" height="500%" fill="url(#gridPattern)">
    </g>
    <g id="sockets"></g>
    <g id="workbench"></g>
  </g>`,this.dom.workbench=n.getElementById("workbench"),this.dom.sockets=n.getElementById("sockets"),this.viewBox=new p(n.getElementById("viewbox")),this.dom.svg=n,this.contextMenu=new m(this.addNode.bind(this),this.getNodeById.bind(this)),e.appendChild(n),e.appendChild(this.contextMenu._element);let{left:s,top:i}=n.getBoundingClientRect();this.offsetX=s,this.offsetY=i,n.addEventListener("pointerdown",this.onPointerDown.bind(this)),n.addEventListener("pointermove",this.onPointerMove.bind(this)),n.addEventListener("pointerup",this.onPointerCancel.bind(this)),n.addEventListener("pointercancel",this.onPointerCancel.bind(this)),n.addEventListener("touchstart",r=>r.preventDefault()),n.addEventListener("wheel",this.onWheel.bind(this)),n.addEventListener("contextmenu",this.onContextMenu.bind(this)),n.addEventListener("flower-render",r=>{let l=r.detail.node,d=l.render(),a=l.querySelector("foreignObject");if(d instanceof HTMLElement)a.appendChild(d);else if(typeof d=="string")a.innerHTML=d;else throw Error("Unknown render value: "+d+". Only string or HTMLElement")}),n.addEventListener("flower-remove",r=>{let l=r.detail.node;l.inputSockets.forEach(d=>d.remove()),l.outputSockets.forEach(d=>d.remove()),this.nodes.delete(l.id),l._group.remove()})}onPointerDown(e){if(e.button!==0)return;let{clientX:t,clientY:o,button:n,target:s}=e,i=t-this.offsetX,r=o-this.offsetY;if(this.pointerState.dragging.x=this.pointerState.pos.x-i,this.pointerState.dragging.y=this.pointerState.pos.y-r,this.pointerState.isDragging=n===0,this.dom.svg.setPointerCapture(e.pointerId),this.dom.svg.style.cursor="grabbing",this.contextMenu.close(),s instanceof SVGCircleElement&&s.classList.contains("node-socket-output")){this.dom.svg.style.cursor="crosshair";let a=this.nodes.get(s.parentElement.id),u=a.x+s.cx.baseVal.value,w=a.y+s.cy.baseVal.value,g=new h(u,w,a);this.dom.sockets.appendChild(g._element),this.pointerState.target=g}if(this.pointerState.target)return;if(s instanceof SVGPathElement&&s.classList.contains("node-socket")){let a=s.id,u=a.replace("socket-","node-");u=u.slice(0,u.indexOf("_")),this.nodes.get(u).outputSockets.get(a).remove();return}let l=e.composedPath(),[d]=l.filter(a=>a.nodeName==="g"&&a.classList.contains("node-wrapper"));d&&(this.pointerState.target=d)}onPointerMove(e){let{x:t,y:o}=this.pointerState.pos;if(this.pointerState.movement.x=e.clientX-t,this.pointerState.movement.y=e.clientY-o,this.pointerState.pos.x=e.clientX,this.pointerState.pos.y=e.clientY,!this.pointerState.isDragging)return;if(this.pointerState.target===null){this.viewBox.moveBy(this.pointerState.movement.x,this.pointerState.movement.y);return}let n=this.pointerState.target;if(n instanceof SVGGElement){let s=this.nodes.get(n.id);this.dom.workbench.appendChild(n),s.moveBy(this.pointerState.movement.x,this.pointerState.movement.y)}else if(n instanceof h){let s=e.clientX-this.offsetX-this.viewBox.position.x,i=e.clientY-this.offsetY-this.viewBox.position.y,r=(s+this.pointerState.movement.x)/this.viewBox.zoom,l=(i+this.pointerState.movement.y)/this.viewBox.zoom;n.end(r,l)}}onPointerCancel({clientX:e,clientY:t}){if(this.pointerState.dragging={x:0,y:0},this.pointerState.isDragging=!1,this.dom.svg.style.cursor="",!(this.pointerState.target instanceof h)){this.pointerState.target=null;return}let o=this.pointerState.target;this.pointerState.target=null;let n=e-this.offsetX,s=t-this.offsetY,i=this.dom.svg.createSVGRect();i.x=n-5,i.y=s-5,i.width=10,i.height=10;let r=Array.from(this.dom.svg.getIntersectionList(i,this.dom.svg)),l=r.reverse().findIndex(u=>u.classList.contains("node-socket-input"));if(l===-1){o.remove();return}let d=r[l],a=this.nodes.get(d.parentElement.id);if(o.connectedSocketIndex=+d.dataset.index,o.end(a.x,a.y+d.cy.baseVal.value,a),a.inputSockets.has(o.id)){o.remove();return}o.connected(a)}onWheel(e){let{clientX:t,clientY:o,deltaY:n}=e,s=n*.001,i=t-this.offsetX,r=o-this.offsetY;this.viewBox.zoomBy(s,i,r)}onContextMenu(e){e.preventDefault();let{clientX:t,clientY:o}=e,n=t-this.offsetX,s=o-this.offsetY,i=e.target;if(this.dom.svg===i){this.contextMenu.show(n,s);return}if(!i.offsetParent||!i.offsetParent.parentElement){this.contextMenu.close();return}let r=i.offsetParent.parentElement;this.contextMenu.show(n,s,r)}addNode(e){let t=new e;t._init(this.dom.svg,this.viewBox);let o=`node-${this.nextNodeId++}`,n=t.render();t._group.id=o;let s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");if(n instanceof HTMLElement)s.appendChild(n);else if(typeof n=="string")s.innerHTML=n;else throw Error("Unknown render value("+n+"), only string or HTMLElement.");t._group.appendChild(s),this.dom.workbench.appendChild(t._group);let i=s.firstElementChild,r=t._group.firstElementChild;return t.width=i.offsetWidth,t.height=i.offsetHeight,s.width.baseVal.value=t.width,s.height.baseVal.value=t.height,r.width.baseVal.value=t.width,r.height.baseVal.value=t.height,i.addEventListener("input",()=>t.notifyValueChanged()),this.nodes.set(o,t),t._ready(),t}registerNode(e){this.contextMenu.registerNode(e)}getNodeById(e){return this.nodes.get(e)??null}};var f=class{width=0;height=0;inputSockets=new Map;outputSockets=new Map;_inputSize=0;_outputSize=0;_group;_transform;_viewBox;moveTo(e,t){let o=this._viewBox.zoom,n=e/o,s=t/o;for(let i of this.outputSockets.values())i.begin(i.x1+n,i.y1+s);for(let i of this.inputSockets.values())i.end(i.x2+n,i.y2+s);this._transform.setTranslate(n,s)}moveBy(e,t){let{e:o,f:n}=this._transform.matrix,s=this._viewBox.zoom,i=e/s,r=t/s;for(let l of this.outputSockets.values())l.begin(l.x1+i,l.y1+r);for(let l of this.inputSockets.values())l.end(l.x2+i,l.y2+r);this._transform.setTranslate(o+i,n+r)}setAnchor(e,t=0,o=0){let n=-1,s=-1,i=this._viewBox.width,r=this._viewBox.height,l=this.width,d=this.height,a=e.toLowerCase();if(a.startsWith("left")?n=0:a.startsWith("center")?n=i/2-l/2:a.startsWith("right")&&(n=i-l),a.endsWith("top")?s=0:a.endsWith("center")?s=r/2-d/2:a.endsWith("bottom")&&(s=r-d),n===-1||s===-1)throw Error("Unknown anchor pos: "+e);this.moveTo(n+t,s+o)}requestRender(){let e=new CustomEvent("flower-render",{detail:{node:this}});this._group.ownerSVGElement.dispatchEvent(e)}addInputSocket(e){this.inputSockets.set(e.id,e)}addOutputSocket(e){this.outputSockets.set(e.id,e)}getValue(){if(this.onOutput)return this.onOutput();let e=this._group.querySelectorAll("node-content"),t=e.length,o=[];for(let n=0;n<t;n++){let s=e[n].querySelectorAll("input"),i=s.length;for(let r=0;r<i;r++)o.push(s[r].value??s[r].defaultValue)}return o}connectToNode(e,t=0,o=0){let n=new h;n.connectNodes(this,e,t,o),document.getElementById("sockets").appendChild(n._element)}notifyValueChanged(){let e=Array.from(this.outputSockets.values()),t=e.length;for(let o=0;o<t;o++)e[o].transmitValue()}getElementById(e){return this._group.querySelector(`[data-local-id=${e}]`)}querySelector(e){return this._group.querySelector(e)}querySelectorAll(e){return this._group.querySelectorAll(e)}remove(){this._group.ownerSVGElement.dispatchEvent(new CustomEvent("flower-remove",{detail:{node:this}}))}get id(){return this._group.id}get x(){return this._transform.matrix.e}get y(){return this._transform.matrix.f}_init(e,t){this._transform=e.createSVGTransform();let o=document.createElementNS("http://www.w3.org/2000/svg","g");o.transform.baseVal.appendItem(this._transform),o.classList.add("node-wrapper");let n=document.createElementNS("http://www.w3.org/2000/svg","rect");o.appendChild(n),this._viewBox=t,this._group=o}_ready(){let e=this._group.querySelectorAll("[input]"),t=this._group.querySelectorAll("[output]");this._inputSize=e.length,this._outputSize=t.length;let o=document.createDocumentFragment();for(let n=0;n<e.length;n++){let s=e.item(n),i=s.offsetTop+s.clientHeight/2,r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("node-socket-input"),r.cx.baseVal.value=0,r.cy.baseVal.value=i,r.r.baseVal.value=6,r.dataset.index=String(n),o.appendChild(r)}for(let n=0;n<t.length;n++){let s=t.item(n),i=s.offsetTop+s.clientHeight/2,r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("node-socket-output"),r.cx.baseVal.value=this.width,r.cy.baseVal.value=i,r.r.baseVal.value=6,o.appendChild(r)}this._group.appendChild(o)}_onPreInput(e){if(!this.onInput)throw Error(`${this.name} node not implements 'onInput' function.`);let t=Array.from({length:this._inputSize},()=>{}),o=Array.from(this.inputSockets.values()),n=o.length;for(let s=0;s<n;s++){let i=o[s];if(t[i.connectedSocketIndex]!==void 0){let r=`socket-${e.id.replace("node-","")}_`;if(!i.id.startsWith(r))continue}t[i.connectedSocketIndex]=i.value}this.onInput(t.flat(),e)}};var b=class{constructor(e="[unnamed]"){this.name=e;this.root=document.createElement("node"),this.content=document.createElement("node-content")}root;content;_onPreInput=null;_onPreOutput=null;elements=new Map;setTitle(e){let t=this.root.querySelector("node-title");if(t)return t.textContent=e,this;let o=document.createElement("node-title");return o.textContent=e,this.root.prepend(o),this}input(){return this.content=document.createElement("node-content"),this.content.setAttribute("input",""),this.root.appendChild(this.content),this}output(){return this.content=document.createElement("node-content"),this.content.setAttribute("output",""),this.root.appendChild(this.content),this}addTextFieldElement(e){let t=document.createElement("input");return e.id&&(this.elements.set(e.id,t),t.dataset.localId=e.id,delete e.id),e.value&&(t.setAttribute("value",e.value),delete e.value),e.defaultValue&&(t.setAttribute("defaultValue",e.defaultValue),delete e.defaultValue),Object.assign(t,e),this.content.appendChild(t),this}onInput(e){return this._onPreInput=e,this}onOutput(e){return this._onPreOutput=e,this}build(){let e=this.name,t=this.root,o=this.elements,n=this._onPreInput,s=this._onPreOutput,i=class extends f{name=e;elements=new Map(o);render(){let r=t.cloneNode(!0);return this.elements.forEach((l,d)=>{this.elements.set(d,r.querySelector(`[data-local-id=${d}]`))}),r}};return n!==null&&Object.defineProperty(i.prototype,"onInput",{value(r,l){n.call(this,r,this.elements,l)}}),s!==null&&Object.defineProperty(i.prototype,"onOutput",{value(){return s.call(this,this.elements)}}),i}};})();
